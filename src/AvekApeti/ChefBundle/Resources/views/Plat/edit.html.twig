{%  extends 'GourmetBundle::layout.html.twig' %}

{% block foot_scripts %}
    {{ parent() }}
    <script>
        $('#myStateButton').on('click', function () {
            var btn = $(this)
            btn.button('complete')
            setTimeout(function () {
                btn.button('reset')
            }, 2000)
        })
    </script>
{%  endblock foot_scripts %}

{% block titre %}Mes plats {{ parent() }}{% endblock %}

{% block content %}
    <header class="header-inscription" id="header-edit-plat">
        <div class="header-content header-content-transform">
            <div class="header-content-inner">
                <h1 class="h1-page">Modifier un plat</h1>
                <h2 class="adresse-selection">Chef {{ app.user.username }}</h2>
            </div>
        </div>
    </header>

    <section id="page-edit-plat">
        <div class="container">

            <div class="col-sm-12 text-center photo-mon-compte ">
                {% if entityChef.image %}
                    <img src="{{ entityChef.image.webPath|imagine_filter('profil_picture') }}" alt="" class="img-circle">
                {% else %}
                    <img src={{ asset('bundles/gourmet/img/defaut/defaut-icon.png') }} alt="" class="img-circle">
                {% endif %}
            </div>

            <div class="row">

                <div class="col-lg-12 text-center titre-compte">
                    <h3 class="section-heading">Éveillez les papilles</h3>
                    <hr class="primary">
                    <p>Chaque plat sur Avekapeti est unique. Mettez en avant ce qui rend votre plat appétissant pour que les gourmets qui veulent déguster vos spécialités le remarquent.</p>
                </div>

                {% form_theme edit_form 'form/form_errors.html.twig' %}
                {{ form_start(edit_form, {  'attr':{class: "form-horizontal"} } ) }}

                <div class="col-md-12">

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                {{ form_label(edit_form.name, 'Nom', {'label_attr': {'class': 'col-md-3 control-label'}}) }}
                                <div class="col-md-8">
                                    {{ form_widget(edit_form.name,
                                    {
                                        attr:{class: "form-control",placeholder: "Nom",id: "nom",required: 'data-validation-required-message= "Veuillez entrer le nom du plat."'}
                                    })
                                    }}
                                    <p class="help-block text-danger">{{ form_errors(edit_form.name) }}</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                {{ form_label(edit_form.price, 'Prix en €', {'label_attr': {'class': 'col-md-3 control-label'}}) }}
                                <div class="col-md-8">
                                    {{ form_widget(edit_form.price,
                                    {
                                        attr:{class: "form-control",placeholder: "Prix", id: "prix",required: 'data-validation-required-message= "Veuillez entrer le prix du plat."'}
                                    })
                                    }}
                                    <p class="help-block text-danger">{{ form_errors(edit_form.price) }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                {{ form_label(edit_form.image, 'Photo du plat', {'label_attr': {'class': 'col-md-3 control-label'}}) }}
                                <div class="col-md-8">
                                    {#
                                    <input type="file" id="exampleInputFile3">
                                    <p class="help-block text-danger"></p>
                                    #}
                                    {{ form_widget(edit_form.image,
                                    {
                                        attr:{id: "photo-plat",required: 'data-validation-required-message= "Veuillez sélectionner la photo du plat"'}
                                    })
                                    }}
                                    <p class="help-block text-danger">{{ form_errors(edit_form.image) }}</p>
                                </div>
                                <div class="col-md-8 col-md-offset-3">
                                    {% if entity.image %}
                                        <img  src="{{ entity.image.webPath|imagine_filter('plat_picture_small') }}" alt="">
                                    {% else %}
                                        <img src={{ asset('bundles/gourmet/img/defaut/defaut2.jpg') }} alt="">
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                {{ form_label(edit_form.quantity, 'Nombre de parts', {'label_attr': {'class': 'col-md-3 control-label'}}) }}
                                <div class="col-md-8">
                                    {{ form_widget(edit_form.quantity,
                                    {
                                        attr:{class: "form-control",placeholder: "0" ,id: "quantite", required: 'data-validation-required-message= "Veuillez entrer la quantité du plat."'}
                                    })
                                    }}
                                    <p class="help-block text-danger">{{ form_errors(edit_form.quantity) }}</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                {{ form_label(edit_form.categorie, 'Categorie', {'label_attr': {'class': 'col-md-3 control-label'}}) }}
                                <div class="col-md-8">
                                    {{ form_widget(edit_form.categorie,
                                    {
                                        attr:{class: "form-control",id: "categorie"}
                                    })
                                    }}
                                    <p class="help-block text-danger">{{ form_errors(edit_form.categorie) }}</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                {{ form_label(edit_form.specialite, 'Spécialité', {'label_attr': {'class': 'col-md-3 control-label'}}) }}
                                <div class="col-md-8">
                                    {{ form_widget(edit_form.specialite,
                                    {
                                        attr:{class: "form-control",id: "specialite"}
                                    })
                                    }}
                                    <p class="help-block text-danger">{{ form_errors(edit_form.specialite) }}</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                {{ form_label(edit_form.tcoms, 'Type de commande', {'label_attr': {'class': 'col-md-3 control-label'}}) }}
                                <div class="col-md-8">
                                    {{ form_widget(edit_form.tcoms,
                                    {
                                        attr:{class: "form-control",id: "type-commande"}
                                    })
                                    }}
                                    <p class="help-block text-danger">{{ form_errors(edit_form.tcoms) }}</p>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row">

                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                {{ form_label(edit_form.unableWhile, 'Disponibilité', {'label_attr': {'class': 'col-md-3 control-label'}}) }}
                                <div class="col-md-8">
                                    {{ form_widget(edit_form.unableWhile,
                                    {
                                        attr:{ type:"date",id: "dispo"}
                                    })
                                    }}
                                    <p class="help-block text-danger">{{ form_errors(edit_form.unableWhile) }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                {{ form_label(edit_form.tliv, 'Type de livraison', {'label_attr': {'class': 'col-md-3 control-label'}}) }}
                                <div class="col-md-8">
                                    {{ form_widget(edit_form.tliv,
                                    {
                                        attr:{class: "form-control",id: "type-livraison"}
                                    })
                                    }}
                                    <p class="help-block text-danger">{{ form_errors(edit_form.tliv) }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">

                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                {{ form_label(edit_form.dateStart, 'Date de début', {'label_attr': {'class': 'col-md-3 control-label'}}) }}
                                <div class="col-md-8">
                                    {{ form_widget(edit_form.dateStart,
                                    {
                                        attr:{ type:"date",id: "date-debut"}
                                    })
                                    }}
                                    <p class="help-block text-danger">{{ form_errors(edit_form.dateStart) }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                {{ form_label(edit_form.dateEnd, 'Date de fin', {'label_attr': {'class': 'col-md-3 control-label'}}) }}
                                <div class="col-md-8">
                                    {{ form_widget(edit_form.dateEnd,
                                    {
                                        attr:{ type:"date",id: "date-fin"}
                                    })
                                    }}
                                    <p class="help-block text-danger">{{ form_errors(edit_form.dateEnd) }}</p>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                {{ form_label(edit_form.content, 'Description', {'label_attr': {'class': 'col-md-3 control-label'}}) }}
                                <div class="col-md-8">
                                    {{ form_widget(edit_form.content,
                                    {
                                        attr:{class: "form-control",placeholder: "Description",id: "description",required: 'data-validation-required-message= "Veuillez entrer la description de votre plat."'}
                                    })
                                    }}
                                    <p class="help-block text-danger">{{ form_errors(edit_form.content) }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                <label for="ingredients" class="col-md-3 control-label">Ingrédients</label>
                                <div class="col-md-8">
                                    <textarea id="ingredients" class="form-control" placeholder='-Ingrédient1                                                                  -Ingrédient2 ...' id="ingredients"></textarea>
                                    <p class="help-block text-danger"></p>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group has-feedback">
                                <div class="col-md-3 col-md-offset-3">
                                    <div class="checkbox">
                                        <label>
                                            {{ form_widget(edit_form.active,
                                            {
                                                attr:{type:"checkbox",id: "actif"}
                                            })
                                            }}J'active ce plat
                                        </label>
                                    </div>
                                    <p class="help-block text-danger">{{ form_errors(edit_form.active) }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="clearfix"></div>

                <div class="col-md-5 text-right">
                    <div id="success"></div>
                    <a href="{{ path('chef_plat') }}" class="btn btn-default btn-filtre"><i class="fa fa-1x fa-undo"></i>Retour</a>
                </div>

                <div class="col-md-2 text-center">
                    <div id="success"></div>
                    <button type="submit" class="btn btn-default btn-xl" id="myStateButton" data-complete-text="Chargement..." autocomplete="off">Enregistrer</button>
                </div>
                {{ form_end(edit_form) }}

                <div class="col-md-5 text-left">
                    <div id="success"></div>
                    <button class="btn btn-default btn-filtre"  data-toggle="modal" data-target=".bs-example-modal-sm">
                        <i class="fa fa-1x fa-trash"></i>Supprimer
                    </button>
                    {{ form_start(delete_form) }}
                        <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        <h4 class="modal-title">Suppression de {{ entity.name }}</h4>
                                    </div>
                                    <div class="modal-body">
                                        <p>Etes-vous sur de vouloir supprimer ce plat ?</p>
                                    </div>
                                    <div class="modal-footer">
                                        <button class="btn btn-default" data-dismiss="modal">Annuler</button>
                                        <button class="btn btn-primary">Valider</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {{ form_end(delete_form) }}
                </div>

            </div>


                {#<a href="{{ path('chef_plat') }}">Voir la liste des plats</a>#}
            </div>
        </div>
    </section>
{% endblock content %}